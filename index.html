<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="armada">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <title>armada</title>
    <style>
        div { 
            text-align: center;
        }
    </style>
    <link href="styles.css" rel="stylesheet" type="text/css">
    <script src="modular.js" type="text/javascript"></script>
    <script type="text/javascript">
        // Configuration and Initialization
        window.fuckoffwenetakidcounter = 0;
        ModularJS.config.modulebase = "modules";

        // Module imports
        Import('libcrypto');
        Import('libsploit');
        Import('libmacho');

        // Common functions
        function strip(html) {
            var doc = new DOMParser().parseFromString(html, 'text/html');
            return doc.body.textContent || "";
        }

        // Counter to trigger a bug in the handling of URI schemes
        function vm_wenetakid_prot() {
            if (window.fuckoffwenetakidcounter == 3) {
                alert('I swear, leave me alone WEN ETA kid. Next try I will crash your Safari to make you fuck off if you do not fuck off right now.');
            }

            if (window.fuckoffwenetakidcounter > 3) {
                window.location.href = "fuckoff.html";
            }
        }

        // Overwrite document.write to write to our callback element
        document.write = function(x) {
            document.getElementById('go').innerHTML += x;
        };

        // Simple function to write formatted strings to the callback element
        function puts(str) {
            console.log('[WebsploitFramework][Main]: ' + strip(str.toString()));
            document.write(str.toString() + "<br>");
        }

        // Simply create an object, as OOP is always better
        var Jailbreakme = {
            initialized: false,
            callback: function(id) {
                return document.getElementById(id);
            }
        };

        // This should always be called first
        Jailbreakme.init = function() {
            // Loads the required modules for this file and sets the modulebase
            var load_modules = function() {
                console.log("Initializing modules...");
                ModularJS.config.modulebase = "modules";
                setTimeout(function() {
                    Import('libcrypto');
                    Import('libsploit');
                    Import('libmacho');
                }, 0.01); // Threaded
            };

            try {
                load_modules();
            } catch (exc) { // If we end up here, we obviously failed to initialize
                alert("Exception occurred.\nStack trace:\n" + exc.stack + "\nReason: " + exc.message);
                return;
            }

            this.initialized = true; // We should be initialized now.
        };

        // Clears the displayed exploit progress
        Jailbreakme.clearcallback = function() {
            if (!this.callback('status')) return;
            this.callback('status').innerText = "";
        };

        // Increase counter to trigger a bug in the handling of URI schemes
        Jailbreakme.raise_stupidity = function() {
            if (window.stupidity == window.kStupidity.Stupid) {
                alert('You like pressing some buttons eh? Well I dare you to press it one more time, I\'ll crash your Safari. And remember, patience is a virtue!');
            }
            if (window.stupidity == window.kStupidity.WenETABeggar) {
                window.location.href = "denial.html"; // Redirect to the bug
            }
            window.stupidity++; // Raise the actual stupidity
        };

        function clear_callback() {
            document.getElementById('go').innerText = ""; // Clear the callback element
        }

        // Main entry
        Jailbreakme.go = function(sender) {
            if (!this.initialized) this.init(); // Check if we are initialized, otherwise make sure that we are

            if (sender) { // If we do not have a sender (e.g.: range element) we are trying to jailbreak directly, that should be avoided, we want the user to interact and make sure he is aware of what he is doing
                if (sender.value == 1) {
                    var support = document.getElementById('support'); // Get a reference to the support element
                    if (support != undefined) support.remove(); // In case we have a reference, remove it

                    console.log('[WebsploitFramework][Main]: Starting...');
                    Jailbreakme.clearcallback(); // Clear any previous output or messages on the output element
                    var ret = sploit_main(); // Try to fire up the device detection->strategy selection->suitable exploit

                    if (!ret) this.raise_stupidity(); // If the exploit determination failed, then we raise the stupidity of the user
                    sender.value = 0; // Reset the sender to its default value, otherwise a range slider would remain on a slided state.

                    return ret; // Return the return value of the exploit
                } else { // Whether the value is 0 or higher than 1 we will end up here, on a range slider element a slide event making the value 0 means the user cancelled the exploit
                    var stdout = document.getElementById('status'); // Get a reference to the status element, which is our output element
                    stdout.innerText = "Jailbreak has been canceled."; // Update the status notifying the user that the exploit's been cancelled
                }
            }
        };

        // Load entry
        window.onload = function() {
            try {
                Jailbreakme.init(); // Attempt to initialize the jailbreak
            } catch (exc) {
                alert("Application initialization failed.\nReason:\n" + exc);
            }
        };
    </script>
</head>
<body>
    <script type="text/javascript">
        // This function is called when the user presses the start button
        var go = function() {
            clear_callback();
            console.log('[WebsploitFramework][Main]: Starting...');
            if (!sploit_main()) vm_wenetakid_prot();
        };
    </script>
    <div>
        <h1>armada</h1>
        <p id='support'>Remote jailbreak tool for iOS 4 - 12.1.1, with some exceptions</p>
        <i style="font-size: 13px !important;">9.3.5 - 9.3.6 (32-bit), <a href="itms-services://?action=download-manifest&url=https://jaimin.xyz/armada/manifest.plist">tap here</a></i>
        <br><i style="font-size: 13px !important;">< 11.4, <a href="jb">tap here</a></i>
        <br><i style="font-size: 13px !important;">12.0 - 12.1.1, <a href="pwn">tap here</a></i>
        <br><i style="font-size: 13px !important;"><a href="denial">don't tap here</a></i>
    </div>
    <main>
        <a class="go" href="#" id="go" onclick="go();">jailbreak<noscript>must enable javascript</noscript></a>
    </main>
</body>
</html>
